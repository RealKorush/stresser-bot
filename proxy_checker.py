import requests
import threading
from queue import Queue
import time

# تنظیمات
test_url = "http://httpbin.org/ip"  # URL برای تست پروکسی
proxies_to_check = [http://185.105.102.189:80
http://219.65.73.81:80
http://18.141.140.10:443
http://209.97.150.167:8080
http://161.35.70.249:80
http://59.53.80.122:10024
http://68.183.211.118:2079
http://152.69.229.220:3128
http://168.138.50.91:80
http://191.252.204.220:8080
http://57.129.81.201:8080
http://200.24.153.7:999
http://162.240.19.30:80
http://47.79.16.186:3128
http://124.106.223.156:8082
http://113.108.13.120:4433
http://13.212.95.135:8000
http://77.75.95.14:80
http://68.183.211.118:2053
http://104.237.250.13:80
http://134.209.29.120:8080
http://103.125.16.101:8080
http://34.102.48.89:8080
http://190.61.116.244:999
http://68.183.211.118:2051
http://8.219.92.16:5656
http://51.178.43.70:3128
http://68.183.211.118:2167
http://179.1.48.39:8080
http://201.230.8.146:999
http://115.72.172.222:10001
http://103.247.22.112:4317
http://23.237.210.82:80
http://133.18.234.13:80
http://45.224.97.2:8080
http://183.88.48.52:8080
http://124.107.206.181:8082
http://103.13.204.89:8083
http://27.79.217.197:16000
http://103.243.238.157:51772
http://85.214.107.177:80
http://83.193.174.209:3128
http://112.201.187.253:8085
http://113.175.45.187:8080
http://185.88.177.197:8081
http://77.110.123.32:3128
http://38.51.243.81:999
http://57.129.81.201:3128
http://203.177.133.235:8080
http://156.235.14.203:3128
http://185.166.25.206:8080
http://61.173.53.205:18083
http://218.92.86.202:8689
http://123.58.255.116:19999
http://103.53.78.165:8050
http://18.141.140.10:3128
http://200.45.73.115:3577
http://51.254.132.238:80
http://138.199.233.152:80
http://177.55.49.39:8085
http://51.75.206.209:80
http://114.80.32.8:3081
http://149.86.140.162:8080
http://14.29.236.128:7897
http://103.172.120.37:8080
http://103.242.106.157:8080
http://45.70.202.161:999
http://14.243.171.127:10001
http://27.79.131.16:16000
http://103.158.121.248:8080
http://119.3.113.152:9094
http://212.227.26.27:3128
http://103.75.119.185:80
http://94.70.195.145:8080
http://103.220.23.221:1001
http://93.188.99.188:28080
http://121.101.134.247:8482
http://103.214.144.190:3128
http://186.207.148.71:8787
http://143.42.66.91:80
http://115.77.136.87:10001
http://46.246.1.106:3128
http://57.128.44.204:3128
http://217.219.173.237:8080
http://156.235.11.26:3128
http://89.117.145.245:3128
http://211.225.214.241:80
http://119.3.113.151:9094
http://85.117.63.207:8080
http://45.224.149.99:999
http://160.25.48.33:9090
http://98.191.238.177:80
http://217.182.150.43:50013
http://103.187.117.129:7777
http://8.219.97.248:80
http://59.47.238.4:8088
http://123.30.154.171:7777
http://94.139.204.51:8081
http://91.103.120.55:80
http://208.76.248.130:3128
http://43.159.142.34:31280
http://103.193.145.35:1080
http://120.28.218.160:5050
http://68.183.211.118:2231
http://92.247.12.136:9510
http://185.208.102.155:8080
http://94.136.143.92:8888
http://102.66.221.38:8080
http://190.94.213.234:999
http://156.235.14.244:3128
http://84.53.245.42:41258
http://103.218.24.67:58080
http://102.0.12.126:8082
http://47.236.255.30:9876
http://143.198.42.182:31280
http://200.215.248.112:999
http://51.91.109.83:80
http://18.133.222.120:8080
http://208.67.28.27:58090
http://185.234.65.66:1080
http://45.140.143.77:18080
http://217.15.164.63:3128
http://57.129.81.201:8081
http://34.81.160.132:80
http://124.160.103.162:11451
http://121.36.85.142:2022
http://36.138.53.26:10019
http://223.206.120.188:8080
http://41.139.234.127:8080
http://160.248.7.177:80
http://187.251.130.140:8080
http://103.174.122.203:8090
http://36.33.43.226:8060
http://75.119.144.209:3128
http://80.249.112.166:80
http://67.43.228.251:15085
http://202.169.51.45:8080
http://103.48.70.185:83
http://49.145.117.106:8082
http://118.97.75.86:8080
http://138.68.60.8:80
http://210.206.242.131:5031
http://198.23.143.74:80
http://202.51.98.229:7000
http://60.187.244.66:8085
http://105.174.43.194:8080
http://114.7.236.155:8080
http://85.132.37.9:1313
http://67.43.228.252:23285
http://120.28.168.116:8082
http://168.90.121.137:8080
http://103.119.147.235:8080
http://47.88.59.79:82
http://190.69.157.208:999
http://113.160.116.94:1452
http://181.233.62.9:999
http://175.29.175.22:13482
http://47.91.65.23:3128
http://43.229.127.26:8080
http://64.227.130.38:3128
http://103.247.22.135:8080
http://176.105.212.219:8080
http://190.60.60.220:8080
http://171.7.123.43:8080
http://200.106.63.218:999
http://126.209.9.30:8080
http://3.225.41.109:80
http://119.3.113.150:9094
http://185.128.240.77:8080
http://120.28.139.29:8081
http://180.103.19.100:1080
http://67.43.236.18:23405
http://72.10.160.91:8421
http://190.60.47.186:999
http://185.73.103.23:3128
http://135.181.154.225:80
http://5.9.11.198:3130
http://179.1.142.130:999
http://160.187.218.146:8080
http://148.224.59.25:999
http://170.78.5.214:8080
http://12.218.209.130:53281
http://85.10.199.48:80
http://218.75.224.4:3309
http://200.255.88.23:80
http://218.77.183.214:5224
http://103.133.61.221:8181
http://36.64.195.242:8080
http://185.235.16.12:80
http://154.127.219.242:999
http://45.175.232.75:999
http://103.132.52.127:6111
http://45.245.185.211:8080
http://103.189.197.46:3030
http://27.79.180.236:16000
http://45.12.150.82:8080
http://65.108.203.37:18080
http://168.227.40.126:9192
http://14.225.210.186:3129
http://125.209.110.83:39617
http://103.154.76.2:8080
http://46.47.197.210:3128
http://114.9.26.182:8080
http://118.113.245.206:1080
http://181.119.86.188:999
http://38.250.126.201:999
http://209.97.150.167:80
http://223.94.35.21:7012
http://115.77.165.14:10007
http://8.222.235.39:3128
http://168.197.182.222:8080
http://179.1.203.75:999
http://160.25.196.16:8080
http://180.191.20.35:8082
http://116.212.137.74:8080
http://202.154.19.224:3125
http://90.161.186.147:3128
http://38.52.209.6:999
http://65.21.52.41:8888
http://185.88.177.197:8080
http://178.251.111.25:8080
http://80.240.23.28:80
http://103.215.187.67:3127
http://103.147.134.177:8090
http://186.97.138.69:999
http://203.19.38.114:1080
http://103.81.194.124:8080
http://47.251.43.115:33333
http://190.60.36.210:999
http://103.186.91.121:8080
http://119.148.54.78:1419
http://51.81.245.3:17981
http://57.129.81.201:999
http://156.244.0.116:45554
http://67.43.236.18:26507
http://157.20.244.82:2020
http://121.230.9.42:1080
http://115.72.3.14:10001
http://111.72.132.47:2324
http://190.131.254.85:999
http://89.58.35.180:3128
http://200.107.142.39:3128
http://47.91.29.151:1311
http://5.202.174.38:8080
http://103.242.104.178:8080
http://103.153.247.118:8387
http://103.144.209.104:8715
http://142.93.202.130:3128
http://113.192.48.36:8090
http://38.51.235.216:999
http://23.28.246.152:8080
http://45.136.198.40:3128
http://1.10.211.223:8080
http://120.28.193.165:5050
http://177.234.192.15:999
http://34.87.109.175:443
http://14.241.80.37:8080
http://72.10.160.90:14737
http://103.165.231.43:8080
http://67.43.228.250:21877
http://102.164.201.157:8080
http://138.2.64.185:8118
http://37.211.50.134:8080
http://123.141.185.101:5031
http://123.141.185.139:5031
http://188.245.87.46:3129
http://202.93.247.42:8090
http://201.108.133.162:3128
http://103.111.119.34:8080
http://123.140.100.71:5031
http://103.180.118.174:6789
http://103.106.181.10:82
http://185.255.4.172:2090
http://139.159.97.42:8788
http://182.204.177.139:1080
http://103.171.245.137:1080
http://103.159.96.56:3125
http://103.154.52.4:1111
http://179.1.205.43:999
http://103.146.147.36:8181
http://43.252.237.84:8085
http://41.216.190.164:8080
http://58.69.143.223:41890
http://190.110.34.254:999
http://102.23.235.205:8080
http://38.191.43.224:999
http://209.45.19.5:999
http://103.136.170.191:8080
http://182.204.181.112:1080
http://43.252.237.172:8082
http://113.190.58.76:8118
http://87.248.129.32:80
http://190.242.119.222:8080
http://139.5.152.2:57413
http://115.84.175.2:8181
http://110.235.136.71:8081
http://102.23.228.251:8080
http://201.77.97.96:999
http://102.222.161.143:3128
http://118.113.245.142:2324
http://103.63.26.119:8080
http://118.113.244.150:2324
http://103.197.47.42:8080
http://103.126.87.203:8080
http://27.147.177.74:58080
http://103.156.17.27:8818
http://103.155.196.46:8080
http://45.87.68.7:15321
http://177.93.58.33:999
http://125.87.80.113:2324
http://103.169.130.202:8080
http://185.105.102.179:80
http://195.252.236.91:80
http://103.215.207.85:83
http://202.40.185.145:100
http://192.206.202.1:8080
http://103.165.239.142:8088
http://182.204.177.156:1080
http://194.150.68.7:7010
http://182.204.176.128:1080
http://58.69.161.62:8082
http://182.204.180.14:1080
http://89.163.210.170:4857
http://45.224.119.74:999
http://113.160.132.195:8080
http://111.72.195.223:2324
http://46.249.123.26:8080
http://117.86.6.195:8089
http://103.156.248.240:8085
http://49.67.131.211:1080
http://45.167.95.182:999
http://49.67.128.134:8089
http://36.90.25.188:8080
http://103.82.37.125:8888
http://103.213.218.6:36694
http://103.122.64.150:8080
http://103.233.152.18:8080
http://157.15.51.14:8080
http://154.73.28.79:8080
http://190.103.205.253:9097
http://68.225.17.237:4228
http://111.111.108.141:3128
http://103.189.254.78:2222
http://103.156.16.190:8818
http://185.141.227.216:3128
http://185.215.160.120:65056
http://49.67.128.182:8089
http://103.156.86.131:1080
http://111.132.16.17:3389
http://103.161.69.217:8469
http://176.33.13.54:3310
http://141.98.206.21:1453
http://118.70.16.27:6868
http://78.46.212.196:2033
http://189.124.91.145:7171
http://164.90.242.76:3128
http://46.60.15.62:8080
http://170.245.158.76:8080
http://36.255.86.113:83
http://38.188.100.17:999
http://171.41.128.167:2324
http://36.50.112.145:8080
http://45.191.7.249:8080
http://36.90.24.2:8080
http://5.35.99.100:3128
http://202.10.40.207:8080
http://164.70.95.127:3128
http://111.132.17.123:3389
http://111.72.198.105:2324
http://111.132.16.11:3389
http://103.195.65.139:6000
http://175.158.40.224:2020
http://118.68.114.73:10003
http://177.129.249.170:8080
http://103.159.96.121:8080
http://79.106.231.17:8080
http://102.220.13.208:8080
http://103.159.96.141:8080
http://103.159.96.95:8080
http://15.235.132.246:8080
http://103.159.96.146:3128
http://111.132.16.97:3389
http://27.189.135.108:8089
http://78.46.212.196:1021
http://114.91.26.39:2324
http://88.42.237.102:8080
http://111.132.16.69:3389
http://103.167.170.22:1111
http://111.132.16.156:3389
http://111.132.16.70:3389
http://188.247.61.234:8080
http://171.41.130.174:2324
http://38.66.207.9:999
http://58.219.241.53:3389
http://222.68.37.97:1080
http://125.87.82.171:2324
http://111.132.16.238:3389
http://38.240.45.111:3128
http://178.153.241.108:8080
http://222.68.36.181:2324
http://94.141.99.147:3128
http://38.65.172.4:999
http://102.222.51.105:8080
http://45.86.6.62:8080
http://200.63.107.118:8089
http://222.68.37.224:2324
http://222.68.36.252:2324
http://222.67.10.71:2324
http://94.249.221.93:49200
http://196.0.111.194:34638
http://111.72.193.66:2324
http://37.26.86.206:47464
http://103.168.254.33:8080
http://14.143.130.210:80
http://103.176.96.185:8082
http://194.150.71.0:7060
http://222.68.37.75:1080
http://103.169.139.13:8081
http://49.0.43.238:39930
http://157.20.98.74:1111
http://49.71.105.203:8888
http://45.119.55.157:3128
http://190.95.132.189:999
http://103.126.87.144:8081
http://196.251.222.233:8083
http://222.67.8.254:1080
http://118.113.245.112:2324
http://114.91.25.59:1080
http://103.134.222.186:8080
http://103.235.152.170:57413
http://45.149.93.123:9999
http://222.70.146.212:1080
http://203.161.30.139:8070
http://103.30.181.182:8080
http://141.11.241.127:8080
http://103.243.177.129:8080
http://222.67.12.40:1080
http://222.67.12.185:1080
http://114.91.24.229:1080
http://45.70.236.194:999
http://202.136.89.142:27503
http://141.136.56.104:999
http://172.232.121.132:8080
http://103.145.132.16:8080
http://182.204.181.77:1080
http://94.249.220.135:49200
http://222.67.8.128:1080
http://103.67.84.146:8080
http://186.148.31.19:999
http://222.68.38.82:2324
http://222.68.37.46:2324
http://222.68.39.0:2324
http://222.68.38.14:1080
http://117.3.64.126:10001
http://172.235.29.87:8080
http://27.147.175.115:8080
http://209.97.163.81:8888
http://103.190.60.28:9090
http://114.91.25.83:1080
http://103.148.130.6:8080
http://43.249.143.166:8080
http://203.111.253.103:8080
http://102.222.62.111:8080
http://102.213.241.70:8080
http://154.73.29.129:8080
http://103.149.238.106:8080
http://45.86.6.137:8080
http://103.154.25.126:8080
http://179.107.159.103:8080
http://103.48.70.81:83
http://222.70.145.9:1080
http://222.68.37.254:2324
http://222.68.38.115:1080
http://103.245.205.226:6969
http://182.204.179.34:1080
http://41.65.236.47:1976
http://222.68.42.88:1080
http://222.68.41.137:2324
http://154.65.39.7:80
http://154.65.39.8:80
http://148.230.195.165:6969
http://2.179.193.146:80
http://188.132.150.37:8080
http://36.77.217.161:8081
http://111.72.194.201:2324
http://197.232.85.163:8080
http://103.179.252.167:8181
http://103.191.115.252:82
http://181.78.21.74:999
http://103.147.246.185:3127
http://38.159.227.130:999
http://222.68.36.25:1080
http://182.204.182.147:1080
http://103.219.75.2:8080
http://115.147.63.59:8081
http://160.22.22.89:3125
http://36.37.224.125:8080
http://2.186.114.66:8080
http://177.72.156.75:8080
http://216.158.246.90:51012
http://38.255.23.131:999
http://58.187.175.215:16000
http://27.79.248.34:16000
http://161.97.136.251:3128
http://103.162.54.203:8080
http://186.26.92.180:58339
http://103.247.23.181:1111
http://27.79.164.240:16000
http://119.2.48.12:9669
http://27.79.239.226:16000
http://111.132.16.22:3389
http://27.79.156.251:16000
]  # اینجا لیست پروکسی‌ها رو که از add_http_to_proxy گرفتی کپی کن
working_proxies = []  # لیست پروکسی‌های سالم
queue = Queue()

# تابع تست پروکسی
def check_proxy(proxy):
    try:
        response = requests.get(test_url, proxies={"http": proxy, "https": proxy}, timeout=5)
        if response.status_code == 200:
            print(f"پروکسی {proxy} کار می‌کنه!")
            working_proxies.append(proxy)
        else:
            print(f"پروکسی {proxy} کار نمی‌کنه! کد پاسخ: {response.status_code}")
    except:
        print(f"پروکسی {proxy} خرابه!")

# تابع چندنخی برای تست سریع‌تر
def worker():
    while True:
        proxy = queue.get()
        if proxy is None:
            break
        check_proxy(proxy)
        queue.task_done()

# پر کردن صف و اجرای تست
for proxy in proxies_to_check:
    queue.put(proxy)

threads = []
for _ in range(10):
    thread = threading.Thread(target=worker)
    threads.append(thread)
    thread.start()

queue.join()

# توقف رشته‌ها
for _ in range(10):
    queue.put(None)
for thread in threads:
    thread.join()

# نمایش پروکسی‌های سالم
print("\nپروکسی‌های سالم:")
for proxy in working_proxies:
    print(proxy)
